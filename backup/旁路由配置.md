旁路由配置
（1）设置与主路由于同一网段内
① 保持你的终端设备与主路由的连接，在终端的网络设置中，将IPv4配置改为手动，设置成与旁路由同一网段的任意IP地址。比如说我的旁路由LAN口IP地址为192.168.2.1，就代表网段标识是192.168.2.x，因此这里的IP地址设置为192.168.2.2~192.168.2.254（排除广播地址255）之间的任意一个均可以。在本文中，我使用192.168.2.101这个地址。
② 根据操作系统不同，Windows要求填写子网前缀长度，就填写24，而macOS子网掩码要填写255.255.255.0. （当然，如果你的子网掩码是16位前缀长度，那就保持255.255.0.0即可）
③打开winwos网络设置，点击网络属性，编辑IPv4，根据你旁路由IP地址，依次填写，并保存。
④这个时候，你从浏览器中就可以进入旁路由的后台界面了。
⑤进入管理界面后，我们依次找到网络-接口-LAN

点击修改，在基本设置中，将传输协议改为静态地址：
IPv4地址修改到与主路由同一网段的任意地址，比方说，主路由的LAN口地址为192.168.31.1，子网掩码是255.255.255.0，那么其网段标识即为192.168.31.X，则从192.168.31.2到192.168.31.254中任选一个即可，这样是为了避免后台管理地址冲突，在本文中，使用192.168.31.2作为旁路由的IPv4地址
子网掩码也填写255.255.255.0，与主路由保持一致即可；
IPv4网关要填写主路由LAN口的IP地址，这里是192.168.31.1；
DNS这里也填主路由
下面IPv6分配长度，尽可能禁用，这些交给主路由去操作就行；

同时，关掉DHCP服务，勾选忽略接口；

在高级设置中，也尽可能关闭IPv6管理；

⑦点击保存应用，这个时候不要等待页面回应了，因为更改了旁路由IP地址后，你用目前的电脑已经访问不了了。

⑧重新进入电脑的网络设置，根据操作系统的不同，在IPv4设置里，重新修改为DHCP或者自动获取IP地址

（2）防火墙配置
①电脑自动获取到IP地址后，在浏览器输入之前修改后的旁路由IP地址，本文中是192.168.31.2，进入旁路由管理界面
②依次找到网络-防火墙，在区域转发中，关闭SYN-flood防御，开启IP动态伪装，然后保存应用。

③防火墙自定义规则加入一条指令，以确保同时访问百度和谷歌
指令：iptables -t nat -I POSTROUTING -o eth0 -j MASQUERADE
输入完成后，重启防火墙。

④打开网络-接口-LAN-物理设置，关闭桥接接口，保存应用

⑤打开你的主路由后台，将DHCP服务中的DNS1和默认网关更改为旁路由IP地址

⑥到这里，旁路由配置已完成，可以在网络-诊断中看看能不能ping通外网，如果不行，请检查以上是否都设置正确


客户端配置
这个时候将你的设备连接到主路由，发现旁路由没有作用怎么办？想要的服务都没得到，这是因为没有在终端设备设置网关，我们必须在终端设备设置网关，才能要求路由器在分发给自己之前，先去旁路由去一遍。
设置方法很简单，不管你是WIFI连接还是网线连接，都设置成手动获取IP，IP地址填入主路由网段相同的任意IP地址，注意这里要规避你的旁路由IP地址，并且不要和其他设备冲突，比如，这里填入192.168.31.102，子网掩码就填入255.255.255.0，网关（Mac叫路由器）和首选DNS这里就填旁路由IP地址，这样才能保证数据会先去旁路由处理。